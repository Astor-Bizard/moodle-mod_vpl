define(["jquery","jqueryui","core/log"],function(g,e,n){if(void 0!==M)return M;var t,r,i,o,s,a,l,c,d,u,h,M={doNothing:function(){},returnFalse:function(){return!1},returnTrue:function(){return!0}};function p(e,t){var n=this;this.files=e,this.results=t,setTimeout(function(){n.highlight()},10)}return M.log=function(e,t){t&&n.debug(e)},M.setUserPreferences=function(e){g.ajax({async:!0,type:"POST",url:"../editor/userpreferences.json.php",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})},M.getUserPreferences=function(e){g.ajax({async:!0,type:"POST",url:"../editor/userpreferences.json.php",data:JSON.stringify({getPreferences:!0}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(e)},M.scrollBarWidth=function(){var e=g('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n},M.sanitizeHTML=function(e){return void 0===e||""==e.replace("/^s+|s+$/g","")?"":g("<div>"+e+"</div>").html()},M.sanitizeText=function(e){return void 0===e||""==e.replace("/^s+|s+$/g","")?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},M.setProtocol=function(e){var t;switch(e.wsProtocol){case"always_use_wss":t=!0;break;case"always_use_ws":t=!1;break;default:t="https:"==window.location.protocol}var n=(t?"wss://":"ws://")+e.server;e.secure=t,e.portToUse=t?e.securePort:e.port,n+=":"+e.portToUse+"/",e.monitorURL=n+e.monitorPath,e.executionURL=n+e.executionPath},M.ArrayBuffer2String=function(e){for(var t=new Uint8Array(e),n=[],r=0,i=t.length;r<i;r+=32e3)n.push(String.fromCharCode.apply(String,t.subarray(r,Math.min(r+32e3,i))));return n.join("")},M.String2ArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n},t=0,M.getUniqueId=function(){return t++},function(){var n=/\.([^.]*)$/,t=/^(gif|jpg|jpeg|png|ico)$/i,r=/^(zip|jar|pdf|tar|bin|7z|arj|deb|gzip|rar|rpm|dat|db|rtf|doc|docx|odt)$/i,i=/^blockly[0123]?$/;M.fileExtension=function(e){var t=n.exec(e);return null!==t?t[1]:""},M.isImage=function(e){return t.test(M.fileExtension(e))},M.isBinary=function(e){return M.isImage(e)||r.test(M.fileExtension(e))},M.isBlockly=function(e){return i.test(M.fileExtension(e))};var o=/[\cA-\cZ]|[:-@]|[{-~]|\\|\[|\]|[\/\^`Â´]|^\-|^ | $|\.\./;M.validFileName=function(e){return!(e.length<1)&&(!(128<e.length)&&!o.test(e))}}(),M.getCurrentTime=function(){return parseInt((new Date).valueOf()/1e3)},M.encodeBinary=function(e,t){return M.isBinary(e)?btoa(M.ArrayBuffer2String(t)):btoa(unescape(encodeURIComponent(t)))},M.decodeBinary=function(e,t){var n=atob(t);return M.isBinary(e)?M.String2ArrayBuffer(n):decodeURIComponent(escape(n))},M.validPath=function(e){if(256<e.length)return!1;for(var t=e.split("/"),n=0;n<t.length;n++)if(!M.validFileName(t[n]))return!1;return!0},M.getFileName=function(e){var t=e.split("/");return t[t.length-1]},M.dataFromURLData=function(e){return e.substr(e.indexOf(",")+1)},M.readZipFile=function(e,l,c,d){var t,u,p;"undefined"!=typeof JUnzip?(t=M.ArrayBuffer2String(e),(u=new JUnzip(t)).isZipFile()&&(u.readEntries(),p=u.entries.length,function t(n){var e,r,i,o,s,a;p<=n||c.isClosed()?d&&d():(e=u.entries[n],(r=e.fileName).match(/\/$/)?t(n+1):(c.processFile(r),o="",0===e.compressionMethod?o=e.data:8===e.compressionMethod&&(o=JSInflate.inflate(e.data)),i=M.String2ArrayBuffer(o),M.isBinary(r)?(l({name:r,contents:btoa(o),encoding:1})||(n=p),t(n+1),c.endFile()):(s=new Blob([i],{type:"text/plain"}),(a=new FileReader).onload=function(e){l({name:r,contents:e.target.result,encoding:0})||(n=p),t(n+1),c.endFile()},a.readAsText(s))))}(0))):M.loadScript(["../editor/zip/inflate.js","../editor/zip/unzip.js"],function(){M.readZipFile(e,l,c,d)})},M.readSelectedFiles=function(t,l,e){var c=new M.progressBar("import","import"),n=0;e=e||M.doNothing,c.processFile=function(e){c.setLabel(e),n++},c.endFile=function(){0===--n&&(e(),c.close())},function r(i){var o,s,e,a;i>=t.length||c.isClosed()||(o=t[i],c.processFile(o.name),s=M.isBinary(o.name),e=new FileReader,a=M.fileExtension(o.name).toLowerCase(),e.onload=function(e){var t=!1;if(s)if("zip"==a)try{M.readZipFile(e.target.result,l,c,function(){r(i+1)})}catch(e){M.showErrorMessage(e+" : "+o.name)}else var n=M.dataFromURLData(e.target.result),t=l({name:o.name,contents:n,encoding:1});else t=l({name:o.name,contents:e.target.result,encoding:0});t&&r(i+1),c.endFile()},s?"zip"==a?e.readAsArrayBuffer(o):e.readAsDataURL(o):e.readAsText(o))}(0)},r={gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",ico:"image/vnd.microsoft.icon",pdf:"application/pdf"},M.getMIME=function(e){var t=M.fileExtension(e);return t in r?r[t]:"application/octet-stream"},M.getTimeLeft=function(e){var t="";e<0&&(t+="-",e=-e);var n=e,r=parseInt(n/86400);n-=86400*r,0!==r&&(t+=r+"T");var i=parseInt(n/3600);n-=3600*i;var o=parseInt(n/60);n-=60*o;var s=parseInt(n);return t+=("00"+i).substr(-2)+":",t+=("00"+o).substr(-2),e<3600&&(t+=":"+("00"+s).substr(-2)),t},i={abap:"abap",abc:"abc",ada:"ada",ads:"ada",adb:"ada",as:"actionscript",as3:"actionscript",asm:"assembly_x86",bash:"sh",bat:"batchfile",c:"c_cpp",C:"c_cpp",cc:"c_cpp",cpp:"c_cpp",hxx:"c_cpp",h:"c_cpp",H:"c_cpp",cases:"cases",cbl:"cobol",cob:"cobol",coffee:"coffee",clj:"clojure",cs:"csharp",css:"css",d:"d",dart:"dart",e:"eiffel",erl:"erlang",hrl:"erlang",f:"fortran",f77:"fortran",go:"golang",groovy:"groovy",gv:"dot",hs:"haskell",htm:"html",html:"html",hx:"haxe",java:"java",js:"javascript",json:"json",jsp:"jsp",jsx:"jsx",kt:"kotlin",kts:"kotlin",m:"matlab",md:"markdown",less:"less",lisp:"lisp",lsp:"lisp",lua:"lua",pas:"pascal",p:"pascal",perl:"perl",prl:"perl",php:"php",pro:"prolog",pl:"prolog",py:"python",R:"r",r:"r",rb:"ruby",ruby:"ruby",sass:"sass",scala:"scala",scm:"scheme",s:"scheme",scss:"scss",sh:"sh",swift:"swift",sql:"sql",svg:"svg",tex:"tex",tcl:"tcl",ts:"typescript",twig:"twig",vbs:"vbscript",v:"verilog",vhd:"vhdl",vhdl:"vhdl",xml:"xml",yaml:"yaml"},M.langType=function(e){return e in i?i[e]:"plain_text"},o={},s=/\{\\*\$a\\*}/g,M.str=function(e,t){return o[e]?void 0!==t?o[e].replace(s,t):o[e]:"{"+e+"}"},M.setStr=function(e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);M.dialogbaseOptions={minWidth:200,autoOpen:!1,width:"auto",closeText:M.str("cancel"),modal:!0,dialogClass:"vpl_ide vpl_ide_dialog"}},M.setStr(window.VPLi18n),a={},M.delay=function(e,t,n,r){void 0!==a[e]&&!1===a[e]||clearTimeout(a[e]),a[e]=setTimeout(function(){t(n,r),a[e]=!1},20)},M.longDelay=function(e,t,n,r){void 0!==a[e]&&!1===a[e]||clearTimeout(a[e]),a[e]=setTimeout(function(){t(n,r),a[e]=!1},100)},M.iconModified=function(){var e='<span title="'+M.str("modified")+'" class="vpl_ide_charicon">';return e+='<i class="fa fa-star"></i></span> '},M.iconDelete=function(){var e=' <span title="'+M.str("delete")+'" class="vpl_ide_charicon vpl_ide_delicon">';return e+='<i class="fa fa-trash"></i></span> '},M.iconClose=function(){var e=' <span title="'+M.str("closebuttontitle");return e+='" class="vpl_ide_charicon vpl_ide_closeicon"><i class="fa fa-remove"></i></span> '},M.iconRequired=function(){var e=' <span title="'+M.str("required")+'" class="vpl_ide_charicon">';return e+='<i class="fa fa-shield"></i></span> '},M.iconFolder=function(){return'<i class="fa fa-folder-open-o"></i>'},l={filelist:"folder",filelistclose:"folder-open",new:"file",rename:"pencil",delete:"trash",multidelete:"trash|list",close:"remove",comments:"commenting",import:"upload",print:"print",edit:"edit",undo:"undo",redo:"repeat",select_all:"location-arrow",find:"search",find_replace:"exchange",next:"search-plus",resetfiles:"refresh",download:"download",fullscreen:"expand",regularscreen:"compress",save:"save",sort:"list-ol",run:"rocket",debug:"bug",evaluate:"check-square-o",console:"terminal",about:"question",info:"info-circle",alert:"warning",trash:"trash",retrieve:"download",spinner:"refresh fa-spin",keyboard:"keyboard-o",clipboard:"clipboard",timeleft:"clock-o",copy:"copy",paste:"paste",more:"plus-square",less:"minus-square",resize:"arrows-alt",graphic:"picture-o",send:"send",theme:"paint-brush",user:"user",fontsize:"text-height"},M.genIcon=function(e,t){if(!l[e])return"";var n="fa fa-";n+=t||"lg";for(var r=l[e].split("|"),i="",o=0;o<r.length;o++)i+="<i class='"+n+" fa-"+r[o]+"'></i>";return i},M.setTitleBar=function(e,t,n,r,i){var o=g(e).parent().find("span.ui-dialog-title");var s=M.genIcon(n);s+=" <span class='"+t+"-title-buttons'></span>",s+="<span class='"+t+"-title-text'></span>",o.html(s);for(var a,l,c=o.find("span."+t+"-title-buttons"),d=o.find("span."+t+"-title-text"),s="",u=0;u<r.length;u++)s+=(a=r[u],l=void 0,l="<a id='vpl_"+t+"_"+a+"' href='#' title='"+M.str(a)+"'>",l+=M.genIcon(a,"fw")+"</a>");c.html(s);for(var p=0;p<i.length;p++){var f=o.find("#vpl_"+t+"_"+r[p]);f.button().click(i[p]),f.css("padding","1px 3px")}return c.on("focus","*",function(){g(this).blur()}),d},M.progressBar=function(e,t,n){var r='<div class="vpl_ide_progressbaricon">'+M.genIcon("spinner")+"</div>",i=g('<div class="vpl_ide_dialog" style="display:none;">'+(' <div class="vpl_ide_progressbar">'+r+'<span class="vpl_ide_progressbarlabel"></span></div>')+"</div>");g("body").append(i);var o=i.find(".vpl_ide_progressbar").find(".vpl_ide_progressbarlabel");i.dialog({title:M.str(e),resizable:!1,autoOpen:!1,width:200,height:20,minHeight:20,modal:!0,dialogClass:"vpl_ide vpl_ide_dialog",close:function(e){i&&(n&&e.originalEvent&&n(),n=!1)}}),this.setLabel=function(e,t){i&&(o.text(e),t&&o.html(M.genIcon(t)+" "+o.html()))},this.close=function(){i&&(i.dialog("destroy"),g(i).remove(),i=!1)},this.isClosed=function(){return!1===i};var s=i.siblings().find(".ui-dialog-title");s.html(M.genIcon(e)+" "+s.html()),this.setLabel(M.str(t)),i.dialog("open"),i.dialog("option","height","auto")},M.showMessage=function(e,t){var n=g.extend({},t),r=g('<div class="vpl_ide_dialog"></div>');(n=n||{}).icon||(n.icon="info"),n.title||(n.title=M.str("warning")),r.html(M.genIcon(n.icon)+' <span class="dmessage">'+e+"</span>"),g("body").append(r);var i={};return n.ok?(i[M.str("ok")]=function(){g(this).dialog("close"),n.ok()},i[M.str("cancel")]=function(){g(this).dialog("close")}):i[M.str("ok")]=function(){g(this).dialog("close")},n.next&&(i[M.str("next")]=function(){g(this).dialog("close"),n.next()}),n.close&&(n.oldClose=n.close),r.dialog(g.extend({},M.dialogbaseOptions,{title:n.title,buttons:i,close:function(){g(this).remove(),n.oldClose&&n.oldClose()}})),r.dialog("open"),r.setMessage=function(e){g(r).find(".dmessage").html(e)},r},M.showErrorMessage=function(e,t){var n=g.extend({},M.dialogbaseOptions,{title:M.str("error"),icon:"alert"});return t&&(n=g.extend(n,t)),M.showMessage(e,n)},M.requestAction=function(e,t,n,r){var i=g.Deferred(),o=null,s=!1;""===t&&(t="connecting");var a=new M.progressBar(e,t,function(){4!=o.readyState&&s&&s.abort&&s.abort()}),o=g.ajax({beforeSend:function(e){return s=e,!0},async:!0,type:"POST",url:r+e,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"}).always(function(){a.close()}).done(function(e){e.success?i.resolve(e.response):i.reject(e.error)}).fail(function(e,t,n){var r=M.str("connection_fail")+": "+t;M.log(r),i.reject(r)});return i},M.supportWebSocket=function(){return"WebSocket"in window},M.isAndroid=function(){return-1<window.navigator.userAgent.indexOf("Android")},M.isFirefox=function(){return-1<window.navigator.userAgent.indexOf("Firefox")},M.isMac=function(){return-1<window.navigator.userAgent.indexOf("Mac")},M.clickServer=function(e){var t=screen.width/2-275,n=screen.height/2-225;try{var r="toolbar=no, location=no, directories=no, status=no, menubar=no";if(r+=", resizable=yes, scrollbars=yes, copyhistory=no, width=550",r+=", height=450, top="+n+", left="+t,!window.open(g(this).attr("href"),"_blank",r))return!0}catch(e){return M.log(e),!0}return e.preventDefault(),g(this).parent().hide(),!1},M.acceptCertificates=function(e,t){if(0<e.length){var n,r,i=M.str("acceptcertificatesnote");for(n in i+="<ol>",e){e.hasOwnProperty(n)&&(r=1+n,i+='<li><a href="'+e[n]+'" target="_blank">Server ',i+=r+"</a><br /></ul>")}i+="</ol>";var o=M.showMessage(i,{ok:function(){var e=t();e&&e()},icon:"unlocked",title:M.str("acceptcertificates")});g(o).find("a").on("click keypress",M.clickServer)}else M.log("servers.length == 0"),M.showErrorMessage(M.str("connection_fail"))},M.webSocketMonitor=function(t,e,o,s){M.setProtocol(t);function n(e){i.reject(e)}var r=null,a=null,i=g.Deferred(),l=!1,c={message:function(e){var t=/^([^:]*):?(.*)/i.exec(e),n=t[1],r=t[2];"running"==n&&(n=o);var i=M.str(n);""<r&&(i+=": "+r),null===a||a.isClosed()?s.getConsole&&s.getConsole().isOpen()?s.getConsole().setMessage(i):M.log("Error: no dialogo. Message not shown: "+i):a.setLabel(i)},compilation:function(e){s.setResult&&s.setResult({compilation:e},!1)},retrieve:function(){a.close(),l=!0,M.requestAction("retrieve","","",s.ajaxurl).done(function(e){i.resolve(),s.setResult&&s.setResult(e,!0)}).fail(n)},run:function(e){a.close(),s.run(e,t,r)},close:function(){M.log("ws close message from jail"),r.close(),s.close&&s.close()}};try{if(!M.supportWebSocket())return M.log("ws not available"),i.reject(M.str("browserupdate")),i;r=new WebSocket(t.monitorURL)}catch(e){return M.log("ws new say "+e),i.reject(e.message),i}return a=new M.progressBar(e,"connecting",function(){i.reject("Stopped by user"),r.close()}),r.notOpen=!0,r.onopen=function(){r.notOpen=!1,a.setLabel(M.str("connected"))},r.onerror=function(e){M.log("ws error "+e),a.close(),t.secure&&r.notOpen?M.requestAction("getjails","retrieve",{},s.ajaxurl).done(function(e){M.acceptCertificates(e.servers,function(){return s.getLastAction()})}).fail(n):i.reject(M.str("connection_fail"))},r.onclose=function(){s.getConsole&&s.getConsole().disconnect(),r.notOpen||(a.close(),l||"rejected"==i.state()||i.resolve())},r.onmessage=function(e){var t,n,r=/^([^:]+):/i.exec(e.data);null!==r?(t=r[1],n=e.data.substr(t.length+1),c[t]&&c[t](n)):a.setLabel(M.str("error")+": "+e.data)},i},M.processResult=function(e,f,g,t,r){if(void 0===e||""==e.replace("/^s+|s+$/gm",""))return"";function n(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/,"\\$&")}var i=/\([-]?[\d]+[\.]?[\d]*\)\s*$/,o=/^-.*/,s=/^\s*\>/,h=new RegExp("\\[err\\]|error|"+n(M.str("error")),"i"),v=new RegExp("\\[warn\\]|warning|note|"+n(M.str("warning")),"i"),m=new RegExp("\\[info\\]|information","i"),a="",l="",c="",d="",u=e.split(/\r\n|\n|\r/),y=[],b=!1,w=!1,p=!1;function x(e,t){for(var n,r=!1,i=0;i<y.length;i++)for(var o,s=y[i];null!==(o=s.exec(e));){var a,l=g[i].getAnnotations();w=i,r=!0,a=-1<e.search(h)?"error":-1<e.search(v)?"warning":-1<e.search(m)?"info":"error",b={row:o[2]-1,column:o[3],type:a,text:t},l.push(b);var c=f[i],d=void 0===g[n=i].getTagId?'href="#" ':'href="#'+g[n].getTagId()+'" ',u=M.sanitizeText(c),p='data-file="'+c+'" data-line="'+o[2]+'"';e=e.replace(s,"$1<a "+d+' class="vpl_fl" '+p+">"+u+":$2$3</a>"),g[i].setAnnotations(l)}return!r&&b&&(""!==t?(b.text+="\n"+t,g[w].setAnnotations(g[w].getAnnotations())):b=!1),e}function _(){b=!1;var e=c;return c="",e}function j(){b=!1;var e=d;return d="","<pre><i>"+e+"</i></pre>"}!function(){for(var e=0;e<f.length;e++){var t="(^|.* |.*/)"+n(f[e])+"[:(](\\d+)([:,]?(\\d+)?\\)?)";y[e]=new RegExp(t,"")}}();for(var k,T,S,A,B=0;B<u.length;B++){var I=u[B];if(t)l+=x(M.sanitizeText(I),I)+"\n";else{var C=s.exec(I),L=s.test(I);if(null!==C!=L&&M.log("error"),o.test(I)){switch(a){case"comment":l+=_();break;case"case":l+=j()}p&&(l+="</div>"),l+=function(e){b=!1,e=e.substr(1);var t=i.exec(e);null!==t&&(e=e.substr(0,e.length-t[0].length));var n="";return r&&(n+='<a href="javascript:void(0)" onclick="VPLUtil.showHideDiv(this)">[+]</a>'),n=x(n+='<b class="ui-widget-header ui-corner-all">'+M.sanitizeText(e)+"</b><br />",e)}(I),l+=r?'<div style="display:none">':"<div>",p=!0,a=""}else a=L?("comment"==a&&(l+=_()),S=I.substr(C[0].length),A=void 0,A=M.sanitizeText(S),d+=x(A,S)+"\n","case"):("case"==a&&(l+=j()),k=I,T=void 0,T=M.sanitizeText(k),c+=x(T,k)+"<br />","comment")}}switch(a){case"comment":l+=_();break;case"case":l+=j()}return p&&(l+="</div>"),l},c=[],M.loadScript=function(e,t){var n,r;0!=e.length?(n=e[0],void 0===c[n]?(e.shift(),c[n]=1,(r=document.createElement("script")).type="text/javascript",r.src=M.options.scriptPath+n,r.onload=function(){c[n]=2,M.loadScript(e,t)},document.head.appendChild(r)):2==c[n]?(e.shift(),M.loadScript(e,t)):setTimeout(function(){M.loadScript(e,t)},50)):t()},M.isScriptLoading=function(e){return void 0!==c[e]&&1==c[e]},M.isScriptLoaded=function(e){return void 0!==c[e]&&2==c[e]},M.adjustBlockly=function(e,t,n){for(var r=e.getAllBlocks(),i=2e4,o=-2e4,s=2e4,a=-2e4,l=0;l<r.length;l++)var c=r[l].getRelativeToSurfaceXY(),i=Math.min(i,c.y),o=Math.max(o,c.y),s=Math.min(s,c.x),a=Math.max(a,c.x);r=e.getTopBlocks();for(var d=0;d<r.length;d++)r[d].moveBy(t-s,n-i);return o-i+100+n},d=[],u=[],h=[],p.prototype.highlightBlockly=function(s){M.loadScript(["../editor/blockly/blockly_compressed.js","../editor/blockly/msg/js/en.js","../editor/blockly/blocks_compressed.js"],function(){var e=g("#"+s),t=e.html();g("#"+s+"load").remove(),e.html(""),e.show(),t=g("<div />").html(t).text().replace(/\n/g,"");var n=Blockly.Xml.textToDom(t);e.html("").height(300).width(e.parent().width());var r=Blockly.inject(s,{toolbox:"",readOnly:!0,media:"../editor/blockly/media/"});Blockly.Xml.domToWorkspace(n,r);var i=M.adjustBlockly(r,10,10);e.height(i),e.width("100%"),Blockly.svgResize(r),Blockly.resizeSvgContents(r);var o=e.html();r.dispose(),e.html(o)})},p.prototype.highlight=function(){var e=this;if("undefined"!=typeof ace){for(var i=this.files,o=this.results,s=[],a=[],t=0;t<i.length;t++){var n,r,l,c=i[t],d="code"+c.tagId;M.isBlockly(c.fileName)?e.highlightBlockly(d):(n=M.fileExtension(c.fileName),r=M.langType(n),g("#"+d).show(),g("#"+d+"load").remove(),(l=ace.edit(d)).setTheme("ace/theme/"+c.theme),l.getSession().setMode("ace/mode/"+r),l.renderer.setShowGutter(c.showln),l.setReadOnly(!0),l.setHighlightActiveLine(!1),l.setAutoScrollEditorIntoView(!0),l.setOption("maxLines",c.nl),l.getAnnotations=function(){return this.getSession().getAnnotations()},l.setAnnotations=function(e){return this.getSession().setAnnotations(e)},l.getTagId=function(){return this.vplTagId},l.vplTagId=c.tagId,s.push(l),a.push(c.fileName),h[c.tagId]=l)}for(var u=0;u<o.length;u++){var p=document.getElementById(o[u].tagId),f=p.textContent||p.innerText;p.innerHTML=M.processResult(f,a,s,o[u].noFormat,o[u].folding)}setTimeout(function(){for(var e=0;e<s.length;e++){var t=s[e],n=t.getTagId(),r=g("#"+n).html();t.destroy(),g("#"+n).html(r)}a=s=o=i=null},1e3)}else M.loadScript(["../editor/ace9/ace.js"],function(){e.highlight()})},M.addResults=function(e,t,n){u.push({tagId:e,noFormat:t,folding:n})},M.syntaxHighlightFile=function(e,t,n,r,i){d.push({tagId:e,fileName:t,theme:n,showln:r,nl:i})},M.syntaxHighlight=function(){var e=this;"undefined"!=typeof ace?(new p(d,u),d=[],u=[]):M.loadScript(["../editor/ace9/ace.js"],function(){e.syntaxHighlight()})},M.flEventHandler=function(e){var t=e.target.getAttribute("href").substring(1),n=e.target.getAttribute("data-line"),r=h[t];r.gotoLine(n,0),r.scrollToLine(n,!0)},M.setflEventHandler=function(){for(var e=document.getElementsByClassName("vpl_fl"),t=0;t<e.length;t++)e[t].onclick=M.flEventHandler},M.showHideDiv=function(e){var t=e,n=e;for(n.nextSibling||(n=n.parentNode),n=n.nextSibling;"DIV"!=n.nodeName&&"PRE"!=n.nodeName;)if(!(n=n.nextSibling))return;t&&("[+]"==t.innerHTML?(n.savedDisplay?n.style.display=n.savedDisplay:n.style.display="",t.innerHTML="[-]"):(n.savedDisplay=n.style.display,n.style.display="none",t.innerHTML="[+]"))},M.options={scriptPath:""},M.init=function(e){g.extend(M.options,e)},window.VPLUtil=M});