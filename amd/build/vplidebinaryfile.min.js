define(["jquery","mod_vpl/vplutil"],function(s,a){return function(){this.isBinary=function(){return!0},this.setContent=function(t){this.setmodified(),this.setContent(t),this.updateDataURL()},this.updateDataURL=function(){var t,i=this.getFileName(),e=this.getContent(),n=this.getTId();a.isImage(i)?(t="data:"+a.getMIME(i)+";base64,",s(n).find("img").attr("src",t+e)):s(n).find("img").attr("src","")},this.adjustSize=function(){if(!this.isOpen())return!1;var t=s(this.getTId());if(0===t.length)return!1;var i=t.parent().height();return(i-=t.position().top)!=t.height()&&(t.height(i),!0)},this.open=function(){this.showFileName();var t=this.getFileName(),i=this.getTId();this.setOpen(!0),a.isImage(t)?(s(i).addClass("vpl_ide_img").append("<img />"),this.updateDataURL()):s(i).addClass("vpl_ide_binary").text(a.str("binaryfile"))},this.close=function(){this.setOpen(!1)}}});