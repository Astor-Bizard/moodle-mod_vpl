define(["jquery","mod_vpl/vplutil"],function(n,a){return function(t){t.extendToBinary=function(){this.isBinary=function(){return!0},this.setContent=function(t){this.setmodified(),this.setValue(t),this.setFileName(this.getFileName()),this.updateDataURL()},this.updateDataURL=function(){var t,i=this.getFileName(),e=this.getValue(),s=this.getTId();a.isImage(i)?(t="data:"+a.getMIME(i)+";base64,",n(s).find("img").attr("src",t+e)):n(s).find("img").attr("src","")},this.adjustSize=function(){if(!this.isOpen())return!1;var t=n(this.getTId());if(0===t.length)return!1;var i=t.parent().height();return(i-=t.position().top)!=t.height()&&(t.height(i),!0)},this.open=function(){var t=this.getFileName(),i=this.getTId();this.setOpen(!0),a.isImage(t)?(n(i).addClass("vpl_ide_img").append("<img />"),this.updateDataURL()):n(i).addClass("vpl_ide_binary").text(a.str("binaryfile")),this.setFileName(t)},this.close=function(){this.setOpen(!1)}}}});