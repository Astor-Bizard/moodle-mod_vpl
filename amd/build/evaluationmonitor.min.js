define(["mod_vpl/vplutil"],function(i){return{init:function(t){function e(n){i.showErrorMessage(n,{next:t.next})}t.next=function(){window.location=t.nexturl};var n,a={ajaxurl:t.ajaxurl,run:e,getLastAction:function(){n()}};(n=function(){i.requestAction("evaluate","evaluating",{},t.ajaxurl).done(function(n){i.webSocketMonitor(n,"evaluate","evaluating",a).done(t.next).fail(e)}).fail(e)})()}}});